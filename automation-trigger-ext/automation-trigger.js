define(["qlik","translator","./dist/automation-trigger","./nlib/@nebula.js/stardust/dist/stardust"],(function(e,t,n,o){"use strict";function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=l(e),a=l(t),r=l(n);function s(e,t,n,o,l,i,a){try{var r=e[i](a),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(o,l)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(o,l){var i=e.apply(t,n);function a(e){s(i,o,l,a,r,"next",e)}function r(e){s(i,o,l,a,r,"throw",e)}a(void 0)}))}}var u=window.location.href.split("qlikcloud.com")[0]+"qlikcloud.com";window.location.href.split("qlikcloud.com/sense/app/")[1].split("/")[0],window.location.href.split("qlikcloud.com/sense/app/")[1].split("/")[2];function p(e){return new Promise(function(){var t=c(regeneratorRuntime.mark((function t(n,o){var l,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l={method:"GET",headers:{"Content-Type":"application/json"}},i="".concat(u,"/api/v1/").concat(e),t.next=6,fetch(i,l);case 6:if(200!==(a=t.sent).status){t.next=15;break}return t.t0=n,t.next=11,a.json();case 11:t.t1=t.sent,(0,t.t0)(t.t1),t.next=16;break;case 15:o(a.status);case 16:t.next=22;break;case 18:t.prev=18,t.t2=t.catch(0),o(t.t2),console.error(t.t2);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}())}var d=function(){var e=c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("items?resourceType=automation");case 2:return t=e.sent,e.abrupt("return",t.data.map((function(e){return{value:e.resourceId,label:e.name}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=[{value:"image",icon:"image",label:"Image"},{value:"back",icon:"back",label:"Back"},{value:"forward",icon:"forward",label:"Forward"},{value:"history",icon:"history",label:"History"},{value:"help",icon:"help",label:"Help"},{value:"info",icon:"info",label:"Info"},{value:"text",icon:"text",label:"Text"},{value:"group",icon:"group",label:"Group"},{value:"search",icon:"search",label:"Search"},{value:"zoom-in",icon:"zoom-in",label:"Zoom in"},{value:"zoom-out",icon:"zoom-out",label:"Zoom out"},{value:"export",icon:"export",label:"Export"},{value:"import",icon:"import",label:"Import"},{value:"field",icon:"field",label:"Field"},{value:"lock",icon:"lock",label:"Lock"},{value:"unlock",icon:"unlock",label:"Unlock"},{value:"database",icon:"database",label:"Database"},{value:"calendar",icon:"calendar",label:"Calendar"},{value:"bookmark",icon:"bookmark",label:"Bookmark"},{value:"library",icon:"library",label:"Library"},{value:"star",icon:"star",label:"Star"},{value:"print",icon:"print",label:"Print"},{value:"remove",icon:"remove",label:"Remove"},{value:"handle",icon:"handle",label:"Handle"},{value:"handle-horizontal",icon:"handle-horizontal",label:"Handle horizontal"},{value:"menu",icon:"menu",label:"Menu"},{value:"list",icon:"list",label:"List"},{value:"unordered-list",icon:"unordered-list",label:"Unordered list"},{value:"clock",icon:"clock",label:"Clock"},{value:"puzzle",icon:"puzzle",label:"Puzzle"},{value:"filterpane",icon:"filterpane",label:"Filterpane"},{value:"plus",icon:"plus",label:"Plus"},{value:"minus",icon:"minus",label:"Minus"},{value:"triangle-top",icon:"triangle-top",label:"Triangle top"},{value:"triangle-bottom",icon:"triangle-bottom",label:"Triangle bottom"},{value:"triangle-left",icon:"triangle-left",label:"Triangle left"},{value:"triangle-right",icon:"triangle-right",label:"Triangle right"},{value:"tick",icon:"tick",label:"Tick"},{value:"cogwheel",icon:"cogwheel",label:"Cogwheel"},{value:"settings",icon:"settings",label:"Settings"},{value:"cut",icon:"cut",label:"Cut"},{value:"copy",icon:"copy",label:"Copy"},{value:"paste",icon:"paste",label:"Paste"},{value:"camera",icon:"camera",label:"Camera"},{value:"slide-show",icon:"slide-show",label:"Slide show"},{value:"palette",icon:"palette",label:"Palette"},{value:"shapes",icon:"shapes",label:"Shapes"},{value:"effects",icon:"effects",label:"Effects"},{value:"file",icon:"file",label:"File"},{value:"expand",icon:"expand",label:"Expand"},{value:"collapse",icon:"collapse",label:"Collapse"},{value:"bin",icon:"bin",label:"Bin"},{value:"link",icon:"link",label:"Link"},{value:"pivot",icon:"pivot",label:"Pivot"},{value:"reload",icon:"reload",label:"Reload"},{value:"add",icon:"add",label:"Add"},{value:"edit",icon:"edit",label:"Edit"},{value:"key",icon:"key",label:"Key"},{value:"box",icon:"box",label:"Box"},{value:"home",icon:"home",label:"Home"},{value:"person",icon:"person",label:"Person"},{value:"grid",icon:"grid",label:"Grid"},{value:"cloud",icon:"cloud",label:"Cloud"},{value:"more",icon:"more",label:"More"},{value:"folder",icon:"folder",label:"Folder"},{value:"drop",icon:"drop",label:"Drop"},{value:"play",icon:"play",label:"Play"},{value:"tag",icon:"tag",label:"Tag"},{value:"close",icon:"close",label:"Close"},{value:"warning",icon:"warning",label:"Warning"},{value:"warning-triangle",icon:"warning-triangle",label:"Warning triangle"},{value:"share",icon:"share",label:"Share"},{value:"top",icon:"top",label:"Top"},{value:"low-resolution",icon:"low-resolution",label:"Low resolution"},{value:"high-resolution",icon:"high-resolution",label:"High resolution"},{value:"view",icon:"view",label:"View"},{value:"control",icon:"control",label:"Control"},{value:"code",icon:"code",label:"Code"},{value:"upload",icon:"upload",label:"Upload"},{value:"repair",icon:"repair",label:"Repair"},{value:"split",icon:"split",label:"Split"},{value:"up-down",icon:"up-down",label:"Up down"},{value:"disconnect",icon:"disconnect",label:"Disconnect"},{value:"photo-library",icon:"photo-library",label:"Photo library"},{value:"application",icon:"application",label:"Application"},{value:"new-tab",icon:"new-tab",label:"New tab"},{value:"ascending",icon:"ascending",label:"Ascending"},{value:"descending",icon:"descending",label:"Descending"},{value:"arrow-up",icon:"arrow-up",label:"Arrow up"},{value:"arrow-down",icon:"arrow-down",label:"Arrow down"},{value:"arrow-right",icon:"arrow-right",label:"Arrow right"},{value:"arrow-left",icon:"arrow-left",label:"Arrow left"},{value:"sync",icon:"sync",label:"Sync"},{value:"draggable",icon:"draggable",label:"Draggable"},{value:"book",icon:"book",label:"Book"},{value:"measure",icon:"measure",label:"Measure"},{value:"download",icon:"download",label:"Download"},{value:"more-rounded",icon:"more-rounded",label:"More rounded"},{value:"align-object-left",icon:"align-object-left",label:"Align object-left"},{value:"align-object-center",icon:"align-object-center",label:"Align object-center"},{value:"align-object-right",icon:"align-object-right",label:"Align object-right"},{value:"submit",icon:"submit",label:"Submit"},{value:"operators",icon:"operators",label:"Operators"},{value:"general-data-class",icon:"general-data-class",label:"General data-class"},{value:"building",icon:"building",label:"Building"},{value:"bell",icon:"bell",label:"Bell"},{value:"unlink",icon:"unlink",label:"Unlink"},{value:"lightbulb",icon:"lightbulb",label:"Lightbulb"},{value:"log-in",icon:"log-in",label:"Log in"},{value:"log-out",icon:"log-out",label:"Log out"},{value:"previous",icon:"previous",label:"Previous"},{value:"goto",icon:"goto",label:"Goto"},{value:"save",icon:"save",label:"Save"},{value:"pause",icon:"pause",label:"Pause"},{value:"stop",icon:"stop",label:"Stop"},{value:"step-in",icon:"step-in",label:"Step in"},{value:"comment",icon:"comment",label:"Comment"},{value:"indent",icon:"indent",label:"Indent"},{value:"undent",icon:"undent",label:"Undent"},{value:"filter",icon:"filter",label:"Filter"},{value:"clear-filter",icon:"clear-filter",label:"Clear filter"},{value:"insert",icon:"insert",label:"Insert"},{value:"direction-left",icon:"direction-left",label:"Direction left"},{value:"swap",icon:"swap",label:"Swap"},{value:"bubbles",icon:"bubbles",label:"Bubbles"},{value:"sheet",icon:"sheet",label:"Sheet"},{value:"object",icon:"object",label:"Object"},{value:"clear-selections",icon:"clear-selections",label:"Clear selections"},{value:"selections-tool",icon:"selections-tool",label:"Selections tool"},{value:"selections-reload",icon:"selections-reload",label:"Selections reload"},{value:"selections-back",icon:"selections-back",label:"Selections back"},{value:"selections-forward",icon:"selections-forward",label:"Selections forward"},{value:"expression",icon:"expression",label:"Expression"},{value:"select-alternative",icon:"select-alternative",label:"Select alternative"},{value:"select-possible",icon:"select-possible",label:"Select possible"},{value:"select-excluded",icon:"select-excluded",label:"Select excluded"},{value:"select-all",icon:"select-all",label:"Select all"},{value:"bar-chart",icon:"bar-chart",label:"Bar chart"},{value:"bar-chart-horizontal",icon:"bar-chart-horizontal",label:"Bar chart-horizontal"},{value:"line-chart",icon:"line-chart",label:"Line chart"},{value:"pie-chart",icon:"pie-chart",label:"Pie chart"},{value:"gauge-chart",icon:"gauge-chart",label:"Gauge chart"},{value:"kpi",icon:"kpi",label:"Kpi"},{value:"scatter-chart",icon:"scatter-chart",label:"Scatter chart"},{value:"map",icon:"map",label:"Map"},{value:"table",icon:"table",label:"Table"},{value:"pivot-table",icon:"pivot-table",label:"Pivot table"},{value:"treemap",icon:"treemap",label:"Treemap"},{value:"combo-chart",icon:"combo-chart",label:"Combo chart"},{value:"boxplot",icon:"boxplot",label:"Boxplot"},{value:"distributionplot",icon:"distributionplot",label:"Distributionplot"},{value:"histogram",icon:"histogram",label:"Histogram"},{value:"direct-discovery",icon:"direct-discovery",label:"Direct discovery"},{value:"data-model",icon:"data-model",label:"Data model"},{value:"script",icon:"script",label:"Script"},{value:"script-ok",icon:"script-ok",label:"Script ok"},{value:"debug",icon:"debug",label:"Debug"},{value:"auto-layout",icon:"auto-layout",label:"Auto layout"}],m=["dropdown","dropdownMultiple","textInput"],h=["numberInput","slider","switch","checkbox","rating"],v=["datePicker"],f={definition:{type:"items",component:"accordion",items:{dimensions:{uses:"dimensions",min:0,max:20},measures:{uses:"measures",min:0,max:20},config:{type:"items",label:"Form",component:"items",items:{objects:{ref:"itemsList",label:"Items",type:"items",items:{objects:{type:"array",ref:"items",label:"Items",itemTitleRef:function(e){return"".concat(e.component," ").concat(e.ref)},allowAdd:!0,allowRemove:!0,allowMove:!0,addTranslation:"Add items",items:{component:{label:"Item type",component:"expression-with-dropdown",dropdownOnly:!0,type:"string",ref:"component",defaultValue:"",options:[{value:"checkbox",label:"Checkbox"},{value:"datePicker",label:"Date picker"},{value:"dropdown",label:"Dropdown"},{value:"dropdownMultiple",label:"Dropdown multiple select"},{value:"numberInput",label:"Number"},{value:"rating",label:"Rating"},{value:"slider",label:"Slider"},{value:"switch",label:"Switch"},{value:"textInput",label:"Text"}]},defaultValueString:{type:"string",ref:"defaultValueString",label:"Default value",defaultValue:"",expression:"optional",show:function(e){return m.includes(e.component)}},defaultValueNumber:{type:"number",ref:"defaultValueNumber",label:"Default value",defaultValue:"1",expression:"optional",show:function(e){return h.includes(e.component)}},defaultValueDate:{type:"number",ref:"defaultValueDate",label:"Default value",defaultValue:"=Today()",expression:"always",show:function(e){return v.includes(e.component)}},dateFormat:{label:"Date format",component:"expression-with-dropdown",dropdownOnly:!0,type:"string",ref:"dateFormat",defaultValue:"yyyy/MM/dd|____/__/__",options:[{value:"yyyy-MM-dd|____-__-__",label:"YYYY-MM-DD"},{value:"yyyy.MM.dd|____.__.__",label:"YYYY.MM.DD"},{value:"yyyy/MM/dd|____/__/__",label:"YYYY/MM/dd"},{value:"dd-MM-yyyy|__-__-____",label:"DD-MM-YYYY"},{value:"dd.MM.yyyy|__.__.____",label:"DD.MM.YYYY"},{value:"dd/MM/yyyy|__/__/____",label:"DD/MM/YYYY"},{value:"MM-dd-yyyy|__-__-____",label:"MM-DD-YYYY"},{value:"MM.dd.yyyy|__.__.____",label:"MM.DD.YYYY"},{value:"MM/dd/yyyy|__/__/____",label:"MM/DD/YYYY"}],show:function(e){return v.includes(e.component)}},step:{type:"number",ref:"step",label:"Step",defaultValue:1,expression:"optional",show:function(e){if("slider"===e.component)return!0}},min:{type:"number",ref:"min",label:"Min",defaultValue:0,expression:"optional",show:function(e){if("slider"===e.component)return!0}},max:{type:"number",ref:"max",label:"Max",defaultValue:10,expression:"optional",show:function(e){if("slider"===e.component)return!0}},precision:{type:"number",ref:"precision",label:"Rating precision",defaultValue:.5,expression:"optional",show:function(e){if("rating"===e.component)return!0}},maxRating:{type:"number",ref:"maxRating",label:"Number of stars",defaultValue:5,expression:"optional",show:function(e){if("rating"===e.component)return!0}},ratingSize:{label:"Rating size",component:"expression-with-dropdown",dropdownOnly:!0,type:"string",ref:"ratingSize",defaultValue:"medium",options:[{value:"small",label:"Small"},{value:"medium",label:"Medium"},{value:"large",label:"Large"}],show:function(e){if("rating"===e.component)return!0}},dropdownOptions:{type:"string",ref:"dropdownOptions",label:"Dropdown values",defaultValue:"",expression:"optional",show:function(e){if("dropdown"===e.component||"dropdownMultiple"===e.component)return!0}},explainDropdown:{label:"Enter dropdown values using a comma as a seperator",component:"text",show:function(e){if("dropdown"===e.component||"dropdownMultiple"===e.component)return!0}},width:{type:"number",component:"slider",label:"Width",ref:"width",min:10,max:100,step:1,defaultValue:100},alignment:{component:"item-selection-list",type:"string",ref:"alignment",translation:"properties.Alignment",horizontal:!0,defaultValue:"flex-start",items:[{component:"icon-item",icon:"align_left",value:"flex-start",translation:"properties.dock.left",labelPlacement:"bottom"},{component:"icon-item",icon:"align_center",value:"center",translation:"Common.Center",labelPlacement:"bottom"},{component:"icon-item",icon:"align_right",value:"flex-end",translation:"properties.dock.right",labelPlacement:"bottom"}]},label:{type:"string",ref:"label",label:"Label",defaultValue:"Label",expression:"optional"},ref:{type:"string",ref:"ref",label:"Reference",defaultValue:function(){return Math.random().toString(36).substr(2,5)},expression:"optional"},explainRef:{label:"The reference is used as a key when sending the data to your automation",component:"text"},required:{ref:"required",type:"boolean",component:"switch",translation:"Required input",options:[{value:!0,translation:"properties.on"},{value:!1,translation:"properties.off"}],defaultValue:!1,show:function(e){return"switch"!==e.component&&"checkbox"!==e.component}}}}}}}},automation:{type:"items",label:"Automation",component:"items",items:{blends:{label:"Select an automation",component:"expression-with-dropdown",dropdownOnly:!0,type:"string",ref:"blend.id",defaultValue:"",options:function(){return d()}},blendExecutionToken:{type:"string",ref:"blend.executionToken",label:"Blendr execution token",defaultValue:"",expression:"optional",show:function(){return!1}},automationLink:{label:"Automation link",component:"link",url:function(e){return"".concat(u,"/automations/").concat(e.blend.id,"/editor")},show:function(e){return e.blend.id.length>1}},sendSelections:{type:"boolean",ref:"blend.sendSelections",translation:"Object.ActionButton.Automation.SendSelections",defaultValue:!1},useCondition:{type:"boolean",component:"switch",translation:"Condition to enable automation",ref:"blend.useEnabledCondition",defaultValue:!1,options:[{value:!0,translation:"properties.on"},{value:!1,translation:"properties.off"}]},condition:{ref:"blend.enabledCondition",translation:"properties.enableCondition",type:"integer",expression:"optional",show:function(e){return e.blend.useEnabledCondition}}}},settings:{component:"expandable-items",translation:"Common.Appearance",uses:"settings",items:{general:{type:"items",translation:"properties.general",items:{showTitles:{},details:{show:!1},label:{component:"string",ref:"style.label",translation:"Common.Label",expression:"optional"}}},button:{grouped:!0,type:"items",translation:"Run automation button",items:{buttonLabel:{type:"string",ref:"blend.buttonLabel",label:"Button label",defaultValue:"Run automation",expression:"optional"},runningBlendLabel:{type:"string",ref:"blend.runningBlendLabel",label:"Loading message",defaultValue:"Running automation...",expression:"optional"},buttonHeightAuto:{ref:"blend.buttonHeightAuto",type:"boolean",translation:"Auto button height",component:"switch",options:[{value:!0,translation:"properties.on"},{value:!1,translation:"properties.off"}],defaultValue:!0,show:function(e){return!e.blendDialog.show}},buttonHeight:{type:"number",component:"slider",label:"Button height",ref:"blend.buttonHeight",min:10,max:100,step:1,defaultValue:100,show:function(e){return!e.blend.buttonHeightAuto&&!e.blendDialog.show}},buttonWidthAuto:{ref:"blend.buttonWidthAuto",type:"boolean",translation:"Auto button width",component:"switch",options:[{value:!0,translation:"properties.on"},{value:!1,translation:"properties.off"}],defaultValue:!0,show:function(e){return!e.blendDialog.show}},buttonWidth:{type:"number",component:"slider",label:"Button width",ref:"blend.buttonWidth",min:10,max:100,step:1,defaultValue:100,show:function(e){return!e.blendDialog.show&&!e.blend.buttonWidthAuto}},buttonAlignment:{component:"item-selection-list",type:"string",ref:"blend.alignment",translation:"properties.Alignment",horizontal:!0,defaultValue:"center",items:[{component:"icon-item",icon:"align_left",value:"flex-start",translation:"properties.dock.left",labelPlacement:"bottom"},{component:"icon-item",icon:"align_center",value:"center",translation:"Common.Center",labelPlacement:"bottom"},{component:"icon-item",icon:"align_right",value:"flex-end",translation:"properties.dock.right",labelPlacement:"bottom"}],show:function(e){return!e.blendDialog.show}},buttonUseIcon:{ref:"blend.icon.useIcon",type:"boolean",translation:"properties.icon.use",component:"switch",options:[{value:!0,translation:"properties.on"},{value:!1,translation:"properties.off"}],defaultValue:!1},buttonIconType:{ref:"blend.icon.iconType",component:"expression-with-dropdown",translation:"Icon",defaultValue:"",options:b,expressionType:"StringExpression",show:function(e){return e.blend.icon.useIcon}},buttonIconPosition:{ref:"blend.icon.position",component:"dropdown",translation:"Common.Position",options:[{translation:"properties.dock.left",value:"left"},{translation:"properties.dock.right",value:"right"}],show:function(e){return e.blend.icon.useIcon}}}},dialog:{grouped:!0,type:"items",translation:"Dialog",items:{dialogShow:{ref:"blendDialog.show",type:"boolean",component:"switch",translation:"Use dialog",options:[{value:!0,translation:"properties.on"},{value:!1,translation:"properties.off"}],defaultValue:!1},dialogButtonLabel:{type:"string",ref:"blendDialog.buttonLabel",label:"Button label",defaultValue:"Open dialog",expression:"optional",show:function(e){return e.blendDialog.show}},dialogButtonHeightAuto:{ref:"blendDialog.buttonHeightAuto",type:"boolean",translation:"Auto button height",component:"switch",options:[{value:!0,translation:"properties.on"},{value:!1,translation:"properties.off"}],defaultValue:!0,show:function(e){return e.blendDialog.show}},dialogButtonHeight:{type:"number",component:"slider",label:"Button height",ref:"blendDialog.buttonHeight",min:10,max:100,step:1,defaultValue:100,show:function(e){return!e.blendDialog.buttonHeightAuto&&e.blendDialog.show}},dialogButtonWidthAuto:{ref:"blendDialog.buttonWidthAuto",type:"boolean",translation:"Auto button width",component:"switch",options:[{value:!0,translation:"properties.on"},{value:!1,translation:"properties.off"}],defaultValue:!0,show:function(e){return e.blendDialog.show}},dialogButtonWidth:{type:"number",component:"slider",label:"Button width",ref:"blendDialog.buttonWidth",min:10,max:100,step:1,defaultValue:100,show:function(e){return e.blendDialog.show&&!e.blendDialog.buttonWidthAuto}},dialogAlignment:{component:"item-selection-list",type:"string",ref:"blendDialog.alignment",translation:"properties.Alignment",horizontal:!0,defaultValue:"center",items:[{component:"icon-item",icon:"align_left",value:"flex-start",translation:"properties.dock.left",labelPlacement:"bottom"},{component:"icon-item",icon:"align_center",value:"center",translation:"Common.Center",labelPlacement:"bottom"},{component:"icon-item",icon:"align_right",value:"flex-end",translation:"properties.dock.right",labelPlacement:"bottom"}],show:function(e){return e.blendDialog.show}},dialogUseIcon:{ref:"blendDialog.icon.useIcon",type:"boolean",translation:"properties.icon.use",component:"switch",options:[{value:!0,translation:"properties.on"},{value:!1,translation:"properties.off"}],defaultValue:!1,show:function(e){return e.blendDialog.show}},dialogIconType:{ref:"blendDialog.icon.iconType",component:"expression-with-dropdown",translation:"Icon",defaultValue:"",options:b,expressionType:"StringExpression",show:function(e){return e.blendDialog.show&&e.blendDialog.icon.useIcon}},dialogIconPosition:{ref:"blendDialog.icon.position",component:"dropdown",translation:"Common.Position",options:[{translation:"properties.dock.left",value:"left"},{translation:"properties.dock.right",value:"right"}],show:function(e){return e.blendDialog.show&&e.blendDialog.icon.useIcon}},dialogTitle:{type:"string",ref:"blendDialog.title",label:"Dialog title",defaultValue:"Dialog title",expression:"optional",show:function(e){return e.blendDialog.show}},dialogWidth:{label:"Dialog width",component:"expression-with-dropdown",dropdownOnly:!0,type:"string",ref:"blendDialog.width",defaultValue:"md",options:[{value:"xs",label:"Extra small"},{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"},{value:"xl",label:"Extra large"}],show:function(e){return e.blendDialog.show}}}},notification:{grouped:!0,type:"items",translation:"Notification",items:{successMessageShow:{ref:"blend.showSuccessMsg",type:"boolean",translation:"Show notification",component:"switch",options:[{value:!0,translation:"properties.on"},{value:!1,translation:"properties.off"}],defaultValue:!0},successMessageShowOutput:{ref:"blend.showSuccessMsgOutput",type:"boolean",translation:"Show automation output",component:"switch",options:[{value:!0,translation:"properties.on"},{value:!1,translation:"properties.off"}],defaultValue:!0,show:function(e){return e.blend.showSuccessMsg}},customSuccessMsg:{type:"string",ref:"blend.customSuccessMsg",label:"Success message",defaultValue:"Automation run successfully!",expression:"optional",show:function(e){return e.blend.showSuccessMsg&&!e.blend.showSuccessMsgOutput}},customErrorMsg:{type:"string",ref:"blend.customErrorMsg",label:"Error message",defaultValue:"There was an error running your automation",expression:"optional",show:function(e){return e.blend.showSuccessMsg&&!e.blend.showSuccessMsgOutput}}}},theme:{grouped:!0,type:"items",translation:"Theme",items:{colorPickerPrimary:{component:"color-picker",type:"object",ref:"blendGlobalTheme.primaryColor",translation:"Primary color",dualOutput:!0,defaultValue:{color:"#009845",index:"-1"}},colorPickerSecondary:{component:"color-picker",type:"object",ref:"blendGlobalTheme.secondaryColor",translation:"Secondary color",dualOutput:!0,defaultValue:{color:"#757575",index:"-1"}},colorPickerFont:{component:"color-picker",type:"object",ref:"blendGlobalTheme.fontColor",translation:"Font color",dualOutput:!0,defaultValue:{color:"#FFFFFF",index:"-1"}},variant:{label:"Variant type",component:"dropdown",type:"string",ref:"blendGlobalTheme.variant",defaultValue:"standard",options:[{value:"filled",label:"Filled"},{value:"outlined",label:"Outlined"},{value:"standard",label:"Standard"}]}}}}}}},support:{export:!1,exportData:!1,snapshot:!1,viewData:!1}};const g=1;function w(e,t){const n=[];return function(e){return!!e.tooltips||e.interactionState===g&&!1!==e.tooltips}(e)&&n.push("passive"),e.interactionState===g&&!1!==e.tooltips&&!0!==e.limitedInteraction&&n.push("interact"),t.isSnapshot||(!1!==e.selections&&n.push("select"),n.push("fetch")),n}var y={};function _(){_.init.call(this)}y.isObject=function(e){return"object"==typeof e&&null!==e},y.isNumber=function(e){return"number"==typeof e},y.isUndefined=function(e){return void 0===e},y.isFunction=function(e){return"function"==typeof e};var x=_;_.EventEmitter=_,_.prototype._events=void 0,_.prototype._maxListeners=void 0,_.defaultMaxListeners=10,_.init=function(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0},_.prototype.setMaxListeners=function(e){if(!y.isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},_.prototype.emit=function(e){var t,n,o,l,i,a;if(this._events||(this._events={}),"error"===e&&!this._events.error)throw(t=arguments[1])instanceof Error?t:Error('Uncaught, unspecified "error" event.');if(n=this._events[e],y.isUndefined(n))return!1;if(y.isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,l=new Array(o-1),i=1;i<o;i++)l[i-1]=arguments[i];n.apply(this,l)}else if(y.isObject(n)){for(o=arguments.length,l=new Array(o-1),i=1;i<o;i++)l[i-1]=arguments[i];for(o=(a=n.slice()).length,i=0;i<o;i++)a[i].apply(this,l)}return!0},_.prototype.addListener=function(e,t){var n;if(!y.isFunction(t))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,y.isFunction(t.listener)?t.listener:t),this._events[e]?y.isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,y.isObject(this._events[e])&&!this._events[e].warned)&&((n=y.isUndefined(this._maxListeners)?_.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,y.isFunction(console.error)&&console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),y.isFunction(console.trace)&&console.trace()));return this},_.prototype.on=_.prototype.addListener,_.prototype.once=function(e,t){if(!y.isFunction(t))throw TypeError("listener must be a function");var n=!1;function o(){this.removeListener(e,o),n||(n=!0,t.apply(this,arguments))}return o.listener=t,this.on(e,o),this},_.prototype.removeListener=function(e,t){var n,o,l,i;if(!y.isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(l=(n=this._events[e]).length,o=-1,n===t||y.isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(y.isObject(n)){for(i=l;i-- >0;)if(n[i]===t||n[i].listener&&n[i].listener===t){o=i;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},_.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],y.isFunction(n))this.removeListener(e,n);else if(Array.isArray(n))for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},_.prototype.listeners=function(e){return this._events&&this._events[e]?y.isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},_.listenerCount=function(e,t){return e._events&&e._events[t]?y.isFunction(e._events[t])?1:e._events[t].length:0};var k=e=>{const t={begin(){e.selectionsApi.activated(),e.backendApi.beginSelections(),t.emit("activated")},clear(){e.backendApi.model.resetMadeSelections()},confirm(){e.selectionsApi.confirm()},cancel(){e.selectionsApi.cancel()},select(t){e.selectionsApi.active||e.backendApi.beginSelections(),e.backendApi.model[t.method](...t.params).then((t=>{t||(e.selectionsApi.selectionsMade=!1,this.clear())})),e.selectionsApi.selectionsMade="resetMadeSelections"!==t.method},isActive:()=>e.selectionsApi.active,refreshToolbar(){e.selectionsApi.refreshToolbar()}};var n;return n=t,Object.keys(x.prototype).forEach((e=>{n[e]=x.prototype[e]})),x.init(n),e.selectionsApi.confirm=()=>{e.backendApi.endSelections(!0).then((()=>{e.selectionsApi.deactivated(),t.emit("deactivated")}))},e.selectionsApi.clear=()=>{e.backendApi.clearSelections(),e.selectionsApi.selectionsMade=!1,t.emit("cleared")},e.selectionsApi.cancel=()=>{e.backendApi.endSelections(!1),e.selectionsApi.deactivated(),t.emit("canceled")},t};const{generator:A,theme:S,locale:D}=o.__DO_NOT_USE__,M=D({initial:a.default.language}),V={translator:{...M.translator,get(e,t){const n=a.default.get(e,t);return n===e?M.translator.get(e,t):n}},flags:{isEnabled:()=>!1},anything:{}},L=["viewState","direction","renderer"];function C(e,t){const n={};let o=!1;return Object.keys(e).forEach((l=>{-1!==L.indexOf(l)&&(n[l]=e[l],t[l]!==e[l]&&(o=!0))})),o?n:t}function T(e){return i.default.currApp(e).theme.getApplied().then((t=>{e.nTheme.externalAPI.name()!==t.id&&e.nTheme.internalAPI.setTheme(t.properties,t.id)}))}const I=A(r.default,V),P=f||{};let Y;if(I.qae.data.targets[0]){const e=I.qae.data.targets[0],t=e=>({...e,add:e.added,remove:e.removed,replace:e.replaced,move:e.moved});Y={},e.dimensions&&(Y.dimensions=t(e.dimensions)),e.measures&&(Y.measures=t(e.measures))}return{definition:{type:"items",component:"accordion",items:{data:Y?{uses:"data"}:void 0,sorting:Y?{uses:"sorting"}:void 0,settings:{uses:"settings"}}},data:Y,getSelectionToolbar(){return[...this.senseItems,{name:"Tooltip.clearSelection",tid:"selection-toolbar.clear",isIcon:!0,buttonClass:"clear",iconClass:"lui-icon lui-icon--clear-selections",action:function(){this.selectionsApi.clear()},isDisabled:function(){return!this.selectionsApi.selectionsMade}}]},...P,initialProperties:I.qae.properties.initial,template:'<div style="height: 100%;position: relative"></div>',mounted(e){const t=e[0].children[0],n=k(this.$scope),o=I.create({model:this.backendApi.model,app:this.backendApi.model.session.app,selections:n,explicitResize:!0});this.sn=o,this.snComponent=o.component,this.snComponent.created(),this.snComponent.mounted(t),this.senseItems=[];const{senseItems:l}=this;this.snComponent.observeActions((e=>{l.length=0,l.push(...function(e){return e.map((e=>{const t={isIcon:!0,buttonClass:"sel-toolbar-icon-toggle",isActive:()=>e.active,isDisabled:()=>e.disabled,action(){e.action()},getSvgIcon(){const t=e.getSvgIconShape(),{viewBox:n="0 0 16 16"}=t;return`<i style="display:inline-block;font-style:normal;line-height:0;text-align:center;text-transform:none;vertical-align:-.2em;text-rendering:optimizeLegibility;web-kit-font-smoothing:antialiased;moz-osx-font-smoothing:grayscale"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="${n}" fill="currentColor">${t.shapes.map((({type:e,attrs:t})=>`<${e} ${Object.keys(t).map((e=>`${e}="${t[e]}"`)).join(" ")}/>`)).join("")}</svg></i>`}};return Object.defineProperties(t,{name:{get:()=>e.label},hidden:{get:()=>e.hidden}}),t}))}(e)),this.$scope.selectionsApi.refreshToolbar()})),this.nTheme=S(),this.initiatedTheme=T(this)},suppressOnPaint:()=>!1,paint(){const e=w(this.options,this.backendApi),t={passive:-1===e.indexOf("passive")||void 0,active:-1===e.indexOf("interact")||void 0,select:-1===e.indexOf("select")||void 0},n=C(this.options,this.snComponent.context.options);return this._pureLayout=this.backendApi.model.pureLayout||this.backendApi.model.layout,this.initiatedTheme.then((()=>(T(this),this.snComponent.render({layout:this.backendApi.model.pureLayout||this.backendApi.model.layout,context:{appLayout:{qLocaleInfo:this.backendApi.localeInfo},constraints:t,theme:this.nTheme.externalAPI},options:n}))))},resize(){if(this._pureLayout!==this.backendApi.model.pureLayout)return this.paint();const e=C(this.options,this.snComponent.context.options);return this.snComponent.context.options=e,this.snComponent.resize()},setInteractionState(){this.paint()},setSnapshotData(e){return this.snComponent.setSnapshotData(e)},getViewState(){const e=this.snComponent.getImperativeHandle();if(e&&"function"==typeof e.getViewState)return e.getViewState()},destroy(){this.sn.destroy(),this.snComponent&&(this.snComponent.willUnmount(),this.snComponent.destroy())}}}));
